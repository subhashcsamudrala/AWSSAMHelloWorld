Comment: A state machine that does mock book buying.
StartAt: checkInventory
States:
  checkInventory:
    Type: Task
    Resource: "${CheckInventoryArn}"
    Catch:
      - ErrorEquals: 
          - BookNotFoundException
        Next: BookNotFoundError
      - ErrorEquals: 
          - BookOutOfStockException
        Next: BookOutOfStockError        
      - ErrorEquals: 
          - States.ALL
        Next: GeneralError        
    Next: calculateTotal
  calculateTotal:
    Type: Task
    Resource: "${CalculateTotalArn}"
    End: true
  BookNotFoundError:
    Type: Pass
    Result: "No such book available"
    End: true
  BookOutOfStockError:
    Type: Pass
    Result: "Sorry! Book out of stock"
    End: true
  GeneralError:
    Type: Pass
    Result: "Sorry! Unable to process due to some error"
    End: true    

